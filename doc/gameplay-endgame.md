---
title: 麻雀プログラム ゲーム終了仕様
---

ウマについてはワンスリー、オカは配原 +5000 点返しとして説明する。

## ゲーム終了時の処理

事前条件：理由はどうあれゲームが終了した。

* 卓上にリー棒が残っている場合、トップ目のプレイヤーの点棒として加点する。
  * トップ目のプレイヤーが複数いる場合は上家取りをする。
* プレイヤーの点を獲得した点の大きい順にソートする。
  * 同点が複数いる場合は上家取りをする。

### 最終スコアを計算する

事前条件：四人の順位が確定した。

* 各プレイヤーについて次を計算する：
  * 持ち点から 25000 を引く。
  * ウマを加点する。
    * トップに +50000
    * 二着に +10000
    * 三着に -10000
    * ラスに -30000
  * 1000 で割って得られる浮動小数点数を最終スコアとする。
    ただし内部的には整数値で保持するのが自然だ（つまり 100 で割る）。
